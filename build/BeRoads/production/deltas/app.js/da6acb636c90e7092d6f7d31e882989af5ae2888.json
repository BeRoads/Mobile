["/*6f1ca59baef599d8098d6c805ba2eb0695e69920",42,540230,550770,457,549646,379,544302,127,545181,238,"Socket\",{extend:Ext.app.Controller,host:\"ws://0.0.0.0:8080/socket\",socket:null,ack:0,config:{stores:[\"offline.TrafficEvent\",\"offline.Radar\",\"offline.Webcam",567646,39,"var a=this;this.socket=new WebSocket(this.host);this.socket.onopen=function(){console.log(\"Socket Status: \"+a.socket.readyState+\" (open)\")};this.socket.onmessage=function(e){var c=JSON.parse(e.data);if(c.code==2){a.socket.uuid=c.uuid;a.ack--}if(c.code==3){var d",589135,37,".add(c.data)[0];",589136,36,".sort(\"distance\",\"ASC\");",589136,36,".sync();var b=new google.maps.LatLng(c.data.lat,c.data.lng",561933,50,"a.getProfile()+\".Map\").addTrafficEvent(c.data,b)}};this.socket.onclose=function(){console.log(\"Socket Status: \"+a.socket.readyState+\" (Closed)\")};",560457,479,"subscribe:function(){var b=this;if(this.socket.readyState!=1){throw\"Can't subscribe if the websocket is closed.\"}if(this.socket.uuid==undefined||this.socket.uuid==null){throw\"Can't subscribe if there is no valid subscription.\"}if(this.ack>0){setTimeout(function(){b.subscribe()},1000)}else{var a={code:1,coords:BeRoads.app.user_coords.coords",551882,34,",language:localStorage.getItem(\"lang\")};console.log(\"Subscribing...\");console.log(a);this.ack++;this.socket.send(JSON.stringify(a))}},update:function(){var b=this;if(this.socket.readyState!=1){throw\"Can't subscribe if the websocket is closed.\"}if(this.socket.uuid==undefined||this.socket.uuid==null){throw\"Can't subscribe if there is no valid subscription.\"}if(this.ack>0){setTimeout(function(){b.update()},1000)}else{var a={code:1,coords:BeRoads.app.user_coords.coords",551882,34,",language:localStorage.getItem(\"lang\")};console.log(\"Updating...\");console.log(a);this.ack++;this.socket.send(JSON.stringify(a))}",541343,37,581406,67,540352,3950,"store.on",545183,98,544528,646,545405,4241,550025,745,551227,5350,"addRadar:function(c,a){var b=this",557115,48,"c.id,map:this.map,position:a,title:c",556814,37,"Radar",557720,38,"Speed Limit : '+c",557293,86,"this.markers.radars[b-1],\"click\",function(){showCenteredOverlay(this.markers.radars[b-1])})},addWebcam:function(c,a){var b=this",556732,49,"c.id,map:this.map,position:a,title:c",556814,39,"c",546672,56,556910,76,"this.markers.webcams[b-1],\"click\",function(){showCenteredOverlay(this.markers.webcams[b-1])})},addTrafficEvent:function(b,a){if(b.category!=undefined&&b.category!=null){b.category=b",557530,44,"c=this",557577,55,"b.id,map:this.map,position:a,title:b",557665,43,"b",557709,51,"b",557761,41,"b",557803,50,"this.markers.trafficevents[c-1],\"click\",function(){showCenteredOverlay(this.markers.trafficevents[c-1])})}},renderTrafficMap:function(e,a,g){var h=this;h.map=a;var i=function(k){h.getInfoPanel().setHtml(k.html);h.getInfoPanel().show()};var b",557973,106,"h",558080,42,"h.map,position:b",558138,83,"d",589135,38,"d.each(function(l){if(l.data.lng!=0&&l.data.lat!=0){var k=new google.maps.LatLng(l.data.lat,l.data.lng);h.addTrafficEvent(l.data,k",558574,37,"Radars\")==1){var j=Ext.getStore(\"offline.Radar\");j.each(function(l){if(l.data.lng!=0&&l.data.lat!=0){var k=new google.maps.LatLng(l.data.lat,l.data.lng);h.addRadar(l.data,k",558574,55,589968,35,"each(function(l){if(l.data.lng!=0&&l.data.lat!=0){var k=new google.maps.LatLng(l.data.lat,l.data.lng);h.addWebcam(l.data,k)}})}h.map.setCenter(b);var c=h",558807,59,"l){if(getDistance(l.coords.latitude,l.coords.longitude,c.getPosition().lat(),c.getPosition().lng())>0.1){var k=new google.maps.LatLng(l.coords.latitude,l.coords.longitude);c.setPosition(k);h.map.setCenter(k",559072,3621,561934,47,"WebSocket\").update(",562692,621,561934,47,"WebSocket\").updat",563310,24636,"controllers:[\"WebSocke",587942,4864,";BeRoads.app.getController(\"WebSocket\").subscribe()}}};",592124,33,"});"]